<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>State&生命周期</title>
    <script src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">

      //      function Clock (props) {
      //        return (
      //                <div>
      //                  <h1>Hello,world!</h1>
      //                  <h2>It is {props.date.toLocaleTimeString()}.</h2>
      //                </div>
      //        )
      //      }

      // 将函数转换为类
      //      class Clock extends React.Component {
      //        render () {
      //          return (
      //                  <div>
      //                    <h1>Hello,world!</h1>
      //                    <h2>It is {this.props.date.toLocaleTimeString()}.</h2>
      //                  </div>
      //          )
      //        }
      //      }

      // 为一个类添加局部状态
      class Clock extends React.Component {
        constructor (props) {
          super(props);
          this.state = {date: new Date()}
        }

        componentDidMount () {
          this.timerID = setInterval(() => this.tick(), 1000)
        }

        componentWillUnmount () {
          clearInterval(this.timerID)
        }

        tick () {
          this.setState({
            date: new Date()
          })
        }

        render () {
          return (
                  <div>
                    <h1>Hello,world!</h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                  </div>
          )
        }

      }

      ReactDOM.render(
              <Clock />,
        document.getElementById('root')
      );

    </script>
  </body>
</html>