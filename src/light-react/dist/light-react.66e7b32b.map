{"version":3,"sources":["lib/diff.js","lib/react.js","index.js"],"names":["diff","dom","vnode","newDom","nodeType","textContent","document","createTextNode","parentNode","replaceChild","tag","diffComponent","nodeName","toLowerCase","createElement","childNodes","map","appendChild","children","length","diffChildren","diffAttributes","old","attrs","i","attributes","attr","name","value","undefined","vchildren","domChildren","keyed","child","key","push","min","childrenLen","vchild","j","c","isSameNodeType","_component","oldDom","constructor","element","unmountComponent","removeNode","component","componentWillUnmount","removeChild","setAttribute","createComponent","setComponentProps","renderComponent","console","log","arguments","render","container","innerHTML","_render","String","Object","keys","forEach","test","style","cssText","removeAttribute","Component","props","state","stateChange","assign","inst","prototype","componentWillMount","componentWillReceiveProps","componentWillUpdate","componentDidMount","componentDidUpdate","React","Welcome","App","Counter","num","setState","onClick","getElementById"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClLf;;;;;;;;;;;;AAEA,SAASC,OAAT,CAAiBZ,KAAjB,EAAwB;AACtB,SAAO;AAAA;AAAA;AAAA;AAAYA,UAAM5C;AAAlB,GAAP;AACD;;AAED,SAASyD,GAAT,GAAe;AACb,SACE;AAAA;AAAA;AACE,kCAAC,OAAD,OADF;AAEE,kCAAC,OAAD,IAAS,MAAM,QAAf,GAFF;AAGE,kCAAC,OAAD,IAAS,MAAM,QAAf,GAHF;AAIE,kCAAC,OAAD,IAAS,MAAM,QAAf;AAJF,GADF;AAQD;;IAEKC;;;AACJ,mBAAYd,KAAZ,EAAmB;AAAA;;AAAA,kHACXA,KADW;;AAEjB,UAAKC,KAAL,GAAa;AACXc,WAAK;AADM,KAAb;AAFiB;AAKlB;;;;yCAEoB;AACnB/B,cAAQC,GAAR,CAAY,OAAZ;AACD;;;0CAEqB;AACpBD,cAAQC,GAAR,CAAY,QAAZ;AACD;;;8BAES;AACRD,cAAQC,GAAR,CAAY,KAAZ,EAAmB,IAAnB;AACA,WAAK+B,QAAL,CAAc,EAAED,KAAK,KAAKd,KAAL,CAAWc,GAAX,GAAiB,CAAxB,EAAd;AACD;;;6BAEQ;AAAA;;AACP,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAY,eAAKd,KAAL,CAAWc;AAAvB,SADF;AAEE;AAAA;AAAA,YAAQ,SAAS;AAAA,qBAAM,OAAKE,OAAL,EAAN;AAAA,aAAjB;AAAA;AAAA;AAFF,OADF;AAOD;;;;EA7BmBN,gBAAMZ;;AAiC5BY,gBAAMxB,MAAN,CACE,8BAAC,GAAD,OADF,EAEEpD,SAASmF,cAAT,CAAwB,MAAxB,CAFF;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"light-react.66e7b32b.map","sourceRoot":"..","sourcesContent":["/**\n * diff.js\n *\n * @author bigggge(me@haoduoyu.cc)\n * 2018/9/5.\n */\n\n// https://github.com/hujiulong/blog/issues\n\nimport { setAttribute, setComponentProps, createComponent } from './react';\n\n/**\n *\n * @param dom 真实DOM\n * @param vnode 虚拟DOM\n * @return 更新后的DOM\n */\nexport function diff(dom, vnode) {\n  let newDom;\n\n  // 对比文本节点\n  if (typeof vnode === 'string') {\n    // 存在文本节点则更新\n    if (dom && dom.nodeType === 3) {\n      if (dom.textContent !== vnode) {\n        dom.textContent = vnode;\n      }\n      // 否则创建新文本节点\n    } else {\n      newDom = document.createTextNode(vnode);\n      if (dom && dom.parentNode) {\n        dom.parentNode.replaceChild(newDom, dom);\n      }\n    }\n    return newDom;\n  }\n\n  // diff component\n  if (typeof vnode.tag === 'function') {\n    return diffComponent(dom, vnode);\n  }\n\n  // 非文本节点，如果 DOM 不存在或新旧 DOM 类型不同，就新建一个节点\n  if (!dom || dom.nodeName.toLowerCase() !== vnode.tag.toLowerCase()) {\n    newDom = document.createElement(vnode.tag);\n    if (dom) {\n      [...dom.childNodes].map(newDom.appendChild);\n      if (dom.parentNode) {\n        dom.parentNode.replaceChild(newDom, dom);\n      }\n    }\n  }\n\n  // 对比子节点\n  if (vnode.children && vnode.children.length > 0 || (newDom.childNodes && newDom.childNodes.length > 0)) {\n    diffChildren(newDom, vnode.children);\n  }\n\n  diffAttributes(newDom, vnode);\n\n  return newDom;\n}\n\nfunction diffAttributes(dom, vnode) {\n  const old = {};\n  const attrs = vnode.attrs;\n\n  for (let i = 0; i < dom.attributes.length; i++) {\n    const attr = dom.attributes[i];\n    old[attr.name] = attr.value;\n  }\n\n  // 移除不存在属性\n  for (let name in old) {\n    if (!(name in attrs)) {\n      setAttribute(dom, name, undefined);\n    }\n  }\n\n  // 更新属性值\n  for (let name in attrs) {\n    if (old[name] !== attrs[name]) {\n      setAttribute(dom, name, attrs[name]);\n    }\n  }\n}\n\n// 对比子节点\nfunction diffChildren(dom, vchildren) {\n  const domChildren = dom.childNodes;\n  const children = [];\n\n  const keyed = {};\n\n  if (domChildren.length > 0) {\n    for (let i = 0; i < domChildren.length; i++) {\n      const child = domChildren[i];\n      const key = child.key;\n      if (key) {\n        keyed[key] = child;\n      } else {\n        children.push(child);\n      }\n    }\n  }\n\n  if (vchildren && vchildren.length > 0) {\n    let min = 0;\n    let childrenLen = children.length;\n    for (let i = 0; i < vchildren.length; i++) {\n      const vchild = vchildren[i];\n      const key = vchild.key;\n      let child;\n\n      if (key) {\n        if (keyed[key]) {\n          child = keyed[key];\n          keyed[key] = undefined;\n        }\n      } else if (min < childrenLen) {\n        for (let j = min; j < childrenLen; j++) {\n          let c = children[j];\n          if (c && isSameNodeType(c, vchild)) {\n            child = c;\n            children[j] = undefined;\n\n            if (j === childrenLen - 1) childrenLen--;\n            if (j === min) min++;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction diffComponent(dom, vnode) {\n  let c = dom && dom._component;\n  let oldDom = dom;\n\n  if (c && c.constructor === vnode.tag) {\n    setComponentProps(c, vnode.attrs);\n    dom = c.element;\n  } else {\n    if (c) {\n      unmountComponent(c);\n      oldDom = null;\n    }\n    c = createComponent(vnode.tag, vnode.attrs);\n\n    setComponentProps(c, vnode.attrs);\n    dom = c.element;\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null;\n      removeNode(oldDom);\n    }\n  }\n  return dom;\n}\n\nfunction unmountComponent(component) {\n  if (component.componentWillUnmount()) component.componentWillUnmount();\n  removeNode(component.element);\n}\n\nfunction isSameNodeType(dom, vnode) {\n  return true;\n}\n\nfunction removeNode(dom) {\n  if (dom && dom.parentNode) {\n    dom.parentNode.removeChild(dom);\n  }\n}\n","/**\n * react.js\n *\n * @author bigggge(me@haoduoyu.cc)\n * 2018/9/3.\n */\n\nimport { diff } from './diff';\n\nfunction createElement(tag, attrs, ...children) {\n  console.log('createElement', arguments);\n  return {\n    tag,\n    attrs,\n    children\n  };\n}\n\nfunction render(vnode, container) {\n  container.innerHTML = '';\n  return container.appendChild(_render(vnode));\n}\n\nfunction _render(vnode) {\n  console.log(' [React] _render vnode', vnode);\n\n  if (vnode === null || vnode === undefined) {\n    vnode = '';\n  }\n\n  if (typeof vnode === 'number') {\n    vnode = String(vnode);\n  }\n\n  // 渲染字符串\n  if (typeof vnode === 'string') {\n    return document.createTextNode(vnode);\n    // 渲染组件（函数）\n  }\n\n  // 渲染组件\n  if (typeof vnode.tag === 'function') {\n    const component = createComponent(vnode.tag, vnode.attrs);\n    setComponentProps(component, vnode.attrs);\n    renderComponent(component);\n    return component.element;\n  }\n\n  const dom = document.createElement(vnode.tag);\n\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n      setAttribute(dom, key, value);\n    });\n  }\n\n  if (vnode.children) {\n    vnode.children.forEach(child => render(child, dom));\n  }\n  return dom;\n}\n\n// 设置属性\nexport function setAttribute(dom, name, value) {\n  console.log(' [React] setAttribute dom,name,value', dom, name, value);\n\n  if (name === 'className') name = 'class';\n\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || '';\n\n    } else if (value && typeof value === 'object') {\n      for (let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n\n  } else {\n    if (name in dom) {\n      dom[name] = value || '';\n    }\n    if (value) {\n      dom.setAttribute(name, value);\n    } else {\n      dom.removeAttribute(name, value);\n    }\n  }\n\n}\n\n// Component\nclass Component {\n  constructor(props = {}) {\n    this.state = {};\n    this.props = props;\n  }\n\n  setState(stateChange) {\n    console.log(' [React] setState stateChange', stateChange);\n\n    Object.assign(this.state, stateChange);\n    // 渲染组件\n    renderComponent(this);\n  }\n}\n\n// 创建组件\nexport function createComponent(component, props) {\n  console.log(' [React] createComponent component,props', component, props);\n\n  let inst;\n  // 如果是类组件，直接返回实例\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n    // 如果是函数定义组件\n  } else {\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function() {\n      return this.constructor(props);\n    };\n  }\n  return inst;\n}\n\n// 更新 props\nexport function setComponentProps(component, props) {\n  console.log(' [React] setComponentProps component,props', component, props);\n  if (!component.element) {\n    if (component.componentWillMount) {\n      component.componentWillMount();\n    } else if (component.componentWillReceiveProps) {\n      component.componentWillReceiveProps(props);\n    }\n  }\n  component.props = props;\n}\n\nexport function renderComponent(component) {\n  console.log(' [React] renderComponent component', component);\n\n  let element;\n\n  const vnode = component.render();\n  if (component.element && component.componentWillUpdate) {\n    component.componentWillUpdate();\n  }\n  // element = _render(vnode);\n  element = diff(component.element, vnode);\n\n  if (component.element) {\n    if (component.componentDidMount) {\n      component.componentDidMount();\n    } else if (component.componentDidUpdate) {\n      component.componentDidUpdate();\n    }\n  }\n\n  if (component.element) {\n    component.element.parentNode.replaceChild(element, component.element);\n  }\n\n  component.element = element;\n  element._component = component;\n}\n\nconst React = {\n  createElement,\n  render,\n  Component,\n};\n\nexport default React;\n","import React from './lib/react';\n\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\nfunction App() {\n  return (\n    <div>\n      <Counter />\n      <Welcome name={'peter1'} />\n      <Welcome name={'peter2'} />\n      <Welcome name={'peter3'} />\n    </div>\n  );\n}\n\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      num: 0\n    };\n  }\n\n  componentWillMount() {\n    console.log('mount');\n  }\n\n  componentWillUpdate() {\n    console.log('update');\n  }\n\n  onClick() {\n    console.log('>>>', this);\n    this.setState({ num: this.state.num + 1 });\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>number:{this.state.num}</h1>\n        <button onClick={() => this.onClick()}>add</button>\n        {/*<button onClick={this.onClick()}>add2</button>*/}\n      </div>\n    );\n  }\n\n}\n\nReact.render(\n  <App />,\n  document.getElementById('root')\n);\n// function tick() {\n//   const element = (\n//     <div>\n//       <h1 onClick={() => console.log(123)}>Hello,world!</h1>\n//       <h2 style={{ color: 'blue' }}>It is {new Date().toLocaleTimeString()}.</h2>\n//     </div>\n//   );\n//\n//   React.render(\n//     element,\n//     document.getElementById('root')\n//   );\n// }\n//\n// setInterval(tick, 10000);"]}