{"version":3,"sources":["react.js","index.js"],"names":["renderComponent","createElement","tag","attrs","children","render","vnode","container","appendChild","_render","console","log","document","createTextNode","component","createComponent","setComponentProps","base","dom","Object","keys","forEach","value","key","setAttribute","child","name","test","toLowerCase","style","cssText","removeAttribute","Component","props","state","stateChange","assign","inst","prototype","constructor","componentWillMount","componentWillReceiveProps","renderer","componentDidUpdate","componentWillUpdate","componentDidMount","parentNode","replaceChild","_component","React","innerHTML","Welcome","App","Counter","num","getElementById"],"mappings":"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","file":"light.6cd75bea.map","sourceRoot":"..","sourcesContent":["/**\n * react.js\n *\n * @author bigggge(me@haoduoyu.cc)\n * 2018/9/3.\n */\n\nfunction createElement(tag, attrs, ...children) {\n  return {\n    tag,\n    attrs,\n    children\n  };\n}\n\nfunction render(vnode, container) {\n  return container.appendChild(_render(vnode));\n}\n\nfunction _render(vnode) {\n  console.log(vnode);\n\n  if (typeof vnode === 'string') {\n    return document.createTextNode(vnode);\n  } else if (typeof vnode.tag === 'function') {\n    const component = createComponent(vnode.tag, vnode.attrs);\n    setComponentProps(component, vnode.attrs);\n    return component.base;\n  }\n\n  const dom = document.createElement(vnode.tag);\n\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n      setAttribute(dom, key, value);\n    });\n  }\n\n  vnode.children.forEach(child => render(child, dom));\n  return dom;\n}\n\nfunction setAttribute(dom, name, value) {\n  console.log(dom, name, value);\n\n  if (name === 'className') name = 'class';\n\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || '';\n    } else if (value && typeof value === 'object') {\n      for (let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    }\n  } else {\n    if (name in dom) {\n      dom[name] = value || '';\n    }\n    if (value) {\n      dom.setAttribute(name, value);\n    } else {\n      dom.removeAttribute(name, value);\n    }\n  }\n\n}\n\nclass Component {\n  constructor(props = {}) {\n    this.state = {};\n    this.props = props;\n  }\n\n  setState(stateChange) {\n    Object.assign(this.state, stateChange);\n    renderComponent(this);\n  }\n}\n\nfunction createComponent(component, props) {\n  let inst;\n  if (component.prototype && component.prototype.render) {\n    inst = new Component(props);\n  } else {\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function() {\n      return this.constructor(props);\n    };\n  }\n  return inst;\n}\n\nfunction setComponentProps(component, props) {\n  if (!component.base) {\n    if (component.componentWillMount) {\n      component.componentWillMount();\n    } else if (component.componentWillReceiveProps) {\n      component.componentWillReceiveProps(props);\n    }\n  }\n  component.props = props;\n  renderComponent(component);\n}\n\nexport function renderComponent(component) {\n  let base;\n\n  const renderer = component.render();\n  if (component.base && component.componentDidUpdate) {\n    component.componentWillUpdate();\n  }\n  base = _render(renderer);\n\n  if (component.base) {\n    if (component.componentDidUpdate) {\n      component.componentDidUpdate();\n    } else if (component.componentDidMount) {\n      component.componentDidMount();\n    }\n  }\n\n  if (component.base && component.base.parentNode) {\n    component.base.parentNode.replaceChild(base, component.base);\n  }\n\n  component.base = base;\n  base._component = component;\n}\n\nconst React = {\n  createElement,\n  render: (vnode, container) => {\n    container.innerHTML = '';\n    return render(vnode, container);\n  }\n};\n\nexport default React;\n","import React from './react';\n\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n\nfunction App() {\n  return (\n    <div>\n      <Welcome name={'peter1'} />\n      <Welcome name={'peter2'} />\n      <Welcome name={'peter3'} />\n    </div>\n  );\n}\n\nclass Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      num: 0\n    };\n  }\n\n  componentWillMount() {\n    console.log('mount');\n  }\n\n  componentWillUpdate() {\n    console.log('update');\n  }\n\n}\n\nReact.render(\n  <App />,\n  document.getElementById('root')\n);\n// function tick() {\n//   const element = (\n//     <div>\n//       <h1 onClick={() => console.log(123)}>Hello,world!</h1>\n//       <h2 style={{ color: 'blue' }}>It is {new Date().toLocaleTimeString()}.</h2>\n//     </div>\n//   );\n//\n//   React.render(\n//     element,\n//     document.getElementById('root')\n//   );\n// }\n//\n// setInterval(tick, 10000);"]}